# MetaMCP Backend Environment Variables - AWS Production
# This file contains environment variables for the backend service
# For production environments using AWS services

# Node.js Configuration
NODE_ENV: production

# Database Configuration (RDS PostgreSQL with Multi-AZ)
DB_HOST: "${DB_HOST:-your-prod-rds-instance.region.rds.amazonaws.com}"
DB_PORT: "${DB_PORT:-5432}"
DB_NAME: "${DB_NAME:-metamcp_prod}"
DB_USER: "${DB_USER:-metamcp_user}"
# DB_PASSWORD should be set via AWS Secrets Manager

# Authentication
# BETTER_AUTH_SECRET should be set via AWS Secrets Manager
BETTER_AUTH_URL: "${BETTER_AUTH_URL:-https://api.yourdomain.com}"

# MCP Server Configuration
MCP_SERVERS_DATA_DIR: "/app/data/mcp-sessions"
MCP_SERVERS_LOG_DIR: "/app/logs"
MCP_SERVER_TIMEOUT: "30000"
MCP_SERVER_MAX_IDLE_TIME: "300000"
MCP_SERVER_POOL_SIZE: "20"

# Redis Configuration (ElastiCache with Cluster Mode)
REDIS_URL: "${REDIS_URL:-redis://your-prod-elasticache-cluster.cache.amazonaws.com:6379}"
# REDIS_PASSWORD should be set via AWS Secrets Manager

# AWS-specific Configuration
AWS_REGION: "${AWS_REGION:-us-east-1}"
AWS_ACCOUNT_ID: "${AWS_ACCOUNT_ID}"

# CloudWatch Logging
AWS_LOG_GROUP: "${AWS_LOG_GROUP:-/aws/apprunner/metamcp-backend-prod}"
AWS_LOG_STREAM: "${AWS_LOG_STREAM:-metamcp-backend-prod}"

# Application Settings
LOG_LEVEL: "info"
ENABLE_REQUEST_LOGGING: "true"
ENABLE_METRICS: "true"
ENABLE_TRACING: "true"

# API Rate Limiting (stricter for production)
RATE_LIMIT_WINDOW_MS: "60000"
RATE_LIMIT_MAX_REQUESTS: "500"
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS: "false"

# Middleware Configuration
ENABLE_CORS: "true"
CORS_ORIGINS: "${CORS_ORIGINS:-https://yourdomain.com,https://www.yourdomain.com}"
ENABLE_COMPRESSION: "true"
ENABLE_HELMET: "true"

# Performance Settings
MAX_REQUEST_SIZE: "10mb"
REQUEST_TIMEOUT: "30000"
KEEP_ALIVE_TIMEOUT: "65000"

# Production Features (disabled debug features)
ENABLE_DEBUG_ENDPOINTS: "false"
ENABLE_HOT_RELOAD: "false"
ENABLE_PLAYGROUND: "false"

# Health Check Configuration
HEALTH_CHECK_INTERVAL: "30000"
HEALTH_CHECK_TIMEOUT: "5000"

# File Upload Configuration
MAX_FILE_SIZE: "50mb"
ALLOWED_FILE_TYPES: "json,yaml,yml,txt,log"

# S3 Configuration (for file storage)
S3_BUCKET: "${S3_BUCKET:-metamcp-storage-prod}"
S3_REGION: "${S3_REGION:-us-east-1}"

# Feature Flags
ENABLE_MIDDLEWARE_SYSTEM: "true"
ENABLE_INSPECTOR: "true"
ENABLE_NAMESPACE_AUTO_SCALING: "true"
ENABLE_MCP_SERVER_AUTO_RESTART: "true"

# AWS Secrets Manager Configuration
SECRETS_MANAGER_REGION: "${SECRETS_MANAGER_REGION:-us-east-1}"
DB_SECRET_NAME: "${DB_SECRET_NAME:-metamcp/prod/database/credentials}"
AUTH_SECRET_NAME: "${AUTH_SECRET_NAME:-metamcp/prod/auth/secret}"
REDIS_SECRET_NAME: "${REDIS_SECRET_NAME:-metamcp/prod/redis/auth}"

# CloudWatch Monitoring
ENABLE_CLOUDWATCH_METRICS: "true"
CLOUDWATCH_NAMESPACE: "${CLOUDWATCH_NAMESPACE:-MetaMCP/Production}"

# X-Ray Tracing
ENABLE_XRAY_TRACING: "true"
XRAY_TRACING_NAME: "${XRAY_TRACING_NAME:-MetaMCP-Backend-Prod}"