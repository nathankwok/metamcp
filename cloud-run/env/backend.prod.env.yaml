# MetaMCP Backend Environment Variables - Production
# This file contains environment variables for the backend service
# For production environments

# Node.js Configuration
NODE_ENV: production

# Database Configuration (Cloud SQL)
# Replace these with your actual Cloud SQL connection details
DB_HOST: "/cloudsql/your-project:your-region:your-instance"
DB_PORT: "5432"
DB_NAME: "metamcp_prod"
DB_USER: "metamcp_user"
# DB_PASSWORD should be set via Secret Manager - see secrets/README.md

# Alternative: Use private IP if VPC connector is configured
# DB_HOST: "10.x.x.x"  # Private IP of Cloud SQL instance

# Authentication
# BETTER_AUTH_SECRET should be set via Secret Manager - see secrets/README.md
BETTER_AUTH_URL: "https://your-production-backend-service-url"

# MCP Server Configuration
MCP_SERVERS_DATA_DIR: "/app/data/mcp-sessions"
MCP_SERVERS_LOG_DIR: "/app/logs"
MCP_SERVER_TIMEOUT: "30000"
MCP_SERVER_MAX_IDLE_TIME: "600000"
MCP_SERVER_POOL_SIZE: "20"

# Redis Configuration (for caching and session management)
# REDIS_URL: "redis://10.x.x.x:6379"  # Use Memorystore instance
# REDIS_PASSWORD should be set via Secret Manager if AUTH is enabled

# Application Settings
LOG_LEVEL: "info"
ENABLE_REQUEST_LOGGING: "true"
ENABLE_METRICS: "true"
ENABLE_TRACING: "true"

# API Rate Limiting (Production values)
RATE_LIMIT_WINDOW_MS: "60000"
RATE_LIMIT_MAX_REQUESTS: "500"
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS: "false"

# Middleware Configuration
ENABLE_CORS: "true"
CORS_ORIGINS: "https://your-frontend-domain.com,https://app.your-domain.com"
ENABLE_COMPRESSION: "true"
ENABLE_HELMET: "true"

# Performance Settings (Production optimized)
MAX_REQUEST_SIZE: "10mb"
REQUEST_TIMEOUT: "55000"
KEEP_ALIVE_TIMEOUT: "65000"

# Production Security
ENABLE_DEBUG_ENDPOINTS: "false"
ENABLE_HOT_RELOAD: "false"
ENABLE_PLAYGROUND: "false"

# Health Check Configuration
HEALTH_CHECK_INTERVAL: "30000"
HEALTH_CHECK_TIMEOUT: "5000"

# File Upload Configuration
MAX_FILE_SIZE: "10mb"
ALLOWED_FILE_TYPES: "json,yaml,yml"

# Feature Flags
ENABLE_MIDDLEWARE_SYSTEM: "true"
ENABLE_INSPECTOR: "false"
ENABLE_NAMESPACE_AUTO_SCALING: "true"
ENABLE_MCP_SERVER_AUTO_RESTART: "true"

# Monitoring and Observability
ENABLE_STRUCTURED_LOGGING: "true"
ENABLE_ERROR_TRACKING: "true"
ENABLE_PERFORMANCE_MONITORING: "true"
ENABLE_UPTIME_MONITORING: "true"

# Error Tracking (replace with your actual values)
# SENTRY_DSN should be set via Secret Manager - see secrets/README.md
# SENTRY_ENVIRONMENT: "production"

# Google Cloud Monitoring
ENABLE_GCP_MONITORING: "true"
ENABLE_GCP_LOGGING: "true"
ENABLE_GCP_TRACING: "true"

# Backup and Recovery
ENABLE_AUTOMATED_BACKUPS: "true"
BACKUP_RETENTION_DAYS: "30"

# Security Headers
ENABLE_SECURITY_HEADERS: "true"
ENABLE_RATE_LIMITING: "true"
ENABLE_INPUT_VALIDATION: "true"
ENABLE_SQL_INJECTION_PROTECTION: "true"

# Cache Configuration
ENABLE_RESPONSE_CACHING: "true"
CACHE_TTL_DEFAULT: "300"
CACHE_TTL_STATIC: "3600"
CACHE_TTL_DYNAMIC: "60"

# Session Management
SESSION_TIMEOUT: "3600000"
ENABLE_SESSION_ROTATION: "true"
MAX_CONCURRENT_SESSIONS: "5"