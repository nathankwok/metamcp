# MetaMCP Backend Environment Variables - AWS Development
# This file contains environment variables for the backend service
# For development/staging environments using AWS services

# Node.js Configuration
NODE_ENV: development

# Database Configuration (RDS PostgreSQL)
DB_HOST: "${DB_HOST:-your-rds-instance.region.rds.amazonaws.com}"
DB_PORT: "${DB_PORT:-5432}"
DB_NAME: "${DB_NAME:-metamcp_dev}"
DB_USER: "${DB_USER:-metamcp_user}"
# DB_PASSWORD should be set via AWS Secrets Manager or Parameter Store

# Authentication
# BETTER_AUTH_SECRET should be set via AWS Secrets Manager
BETTER_AUTH_URL: "${BETTER_AUTH_URL:-https://your-app-runner-service.region.awsapprunner.com}"

# MCP Server Configuration
MCP_SERVERS_DATA_DIR: "/app/data/mcp-sessions"
MCP_SERVERS_LOG_DIR: "/app/logs"
MCP_SERVER_TIMEOUT: "30000"
MCP_SERVER_MAX_IDLE_TIME: "300000"
MCP_SERVER_POOL_SIZE: "10"

# Redis Configuration (ElastiCache)
REDIS_URL: "${REDIS_URL:-redis://your-elasticache-cluster.cache.amazonaws.com:6379}"
# REDIS_PASSWORD should be set via AWS Secrets Manager if AUTH is enabled

# AWS-specific Configuration
AWS_REGION: "${AWS_REGION:-us-east-1}"
AWS_ACCOUNT_ID: "${AWS_ACCOUNT_ID}"

# CloudWatch Logging
AWS_LOG_GROUP: "${AWS_LOG_GROUP:-/aws/apprunner/metamcp-backend}"
AWS_LOG_STREAM: "${AWS_LOG_STREAM:-metamcp-backend}"

# Application Settings  
LOG_LEVEL: "debug"
ENABLE_REQUEST_LOGGING: "true"
ENABLE_METRICS: "true"
ENABLE_TRACING: "false"

# API Rate Limiting
RATE_LIMIT_WINDOW_MS: "60000"
RATE_LIMIT_MAX_REQUESTS: "1000"
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS: "true"

# Middleware Configuration
ENABLE_CORS: "true"
CORS_ORIGINS: "${CORS_ORIGINS:-*}"
ENABLE_COMPRESSION: "true"
ENABLE_HELMET: "true"

# Performance Settings
MAX_REQUEST_SIZE: "10mb"
REQUEST_TIMEOUT: "30000"
KEEP_ALIVE_TIMEOUT: "65000"

# Development Features
ENABLE_DEBUG_ENDPOINTS: "true"
ENABLE_HOT_RELOAD: "false"
ENABLE_PLAYGROUND: "true"

# Health Check Configuration
HEALTH_CHECK_INTERVAL: "30000"
HEALTH_CHECK_TIMEOUT: "5000"

# File Upload Configuration
MAX_FILE_SIZE: "50mb"
ALLOWED_FILE_TYPES: "json,yaml,yml,txt,log"

# S3 Configuration (for file storage)
S3_BUCKET: "${S3_BUCKET:-metamcp-storage-dev}"
S3_REGION: "${S3_REGION:-us-east-1}"

# Feature Flags
ENABLE_MIDDLEWARE_SYSTEM: "true"
ENABLE_INSPECTOR: "true"
ENABLE_NAMESPACE_AUTO_SCALING: "true"
ENABLE_MCP_SERVER_AUTO_RESTART: "true"

# AWS Secrets Manager Configuration
SECRETS_MANAGER_REGION: "${SECRETS_MANAGER_REGION:-us-east-1}"
DB_SECRET_NAME: "${DB_SECRET_NAME:-metamcp/database/credentials}"
AUTH_SECRET_NAME: "${AUTH_SECRET_NAME:-metamcp/auth/secret}"
REDIS_SECRET_NAME: "${REDIS_SECRET_NAME:-metamcp/redis/auth}"